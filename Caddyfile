{
	# Coolify handles HTTPS termination at its proxy level
	auto_https off
}

:80 {
	# Serve frontend static files from /srv/frontend (mounted via docker-compose)
	root * /srv/frontend
	file_server

	# Proxy WebSocket and API requests to backend
	handle /ws/* {
		reverse_proxy backend:3000
	}

	handle /health {
		reverse_proxy backend:3000
	}

	# SPA fallback - serve index.html for unmatched routes
	try_files {path} /index.html
}
